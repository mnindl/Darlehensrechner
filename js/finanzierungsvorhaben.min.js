function finanzierungsvorhaben(){this.sollzinsbindung=5;this.effektivzins=[3.92,4.29,4.69,4.82];this.effektivzins_back=[3.92,4.29,4.69,4.82];this.baufizins=true;this.tilgung=1;this.rate=300;this.eigenkapital=1000;this.maximalbetrag=0;this.kaufpreis=0;this.restschuld=0;this.darlehen=0;this.nominalzins=0;this.annuitaet=0;this.modernisierung=0;this.volltilgung=false;this.monate=0;var d=0.05;var b=0.05;var a=0.015;var c=0.035;this.getSicherheitsaufschlag=function(){return this.maximalbetrag*d};this.getMarklercourtage=function(){return this.maximalbetrag*b};this.getNotarGrundbuchkosten=function(){return this.maximalbetrag*a};this.getGrunderwerbssteuer=function(){return this.maximalbetrag*c};this.getJahresLeistung=function(){return this.rate*12};this.getNebenkosten=function(){return this.getSicherheitsaufschlag()+this.getMarklercourtage()+this.getNotarGrundbuchkosten()+this.getGrunderwerbssteuer()};this.getCurrentZins=function(){switch(this.sollzinsbindung){case 5:return this.effektivzins[0];case 10:return this.effektivzins[1];case 15:return this.effektivzins[2];case 20:return this.effektivzins[3]}};this.calculateNominalzins=function(){var e=this.round_float((Math.pow((1+(this.getCurrentZins()/100)),(1/12))-1)*1200,3);return e};this.calculateAnnuitaet=function(){return this.darlehen*(this.tilgung+this.nominalzins)/100/12};this.calculateRestschuld=function(){var f=(parseFloat(this.tilgung)+parseFloat(this.nominalzins))/100/12;var k=this.darlehen*f;var j=Math.pow(1+this.nominalzins/12/100,this.sollzinsbindung*12)-1;var i=j/(this.nominalzins/12/100);var h=this.nominalzins/100/12;var g=k-this.darlehen*h;var e=this.darlehen-g*i;return(e<0?0:e)};this.calculateAnfaenglicheZinsrate=function(){return(this.darlehen*(this.nominalzins/100))/12};this.calculate=function(){this.effektivzins=[this.round_float(this.effektivzins[0],3),this.round_float(this.effektivzins[1],3),this.round_float(this.effektivzins[2],3),this.round_float(this.effektivzins[3],3)];this.nominalzins=this.calculateNominalzins();var e=this.round_float(this.nominalzins,3)+this.round_float(this.tilgung,3);this.darlehen=Math.round(this.getJahresLeistung()/e)*100;this.restschuld=this.calculateRestschuld();this.maximalbetrag=Math.round(parseInt(this.darlehen,10)+parseInt(this.eigenkapital,10));this.kaufpreis=this.maximalbetrag-(this.getNebenkosten()+this.modernisierung)};this.round_float=function(e,f){if(!parseInt(f,10)){f=0}if(!parseFloat(e)){return false}return Math.round(e*Math.pow(10,f))/Math.pow(10,f)}};